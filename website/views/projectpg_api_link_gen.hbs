{{>navbar username=username}}
<h3 id="welcomecomp">{{project.projName}}</h3>
<div id="projpath"><a  href="/mycompany">AutoSense<a href="/mycompany">&gt;Projects</a><a href="/mycompany/project/{{project.id}}">&gt;{{project.projName}}</a></a></div>
{{!-- <div id="dashboard"><iframe src="https://labserver.sense-campus.gr:8087/d-solo/ee5awawrs54w0b/autosenseanalytics-wifi?from=1732770651103&to=1732792251103&timezone=browser&orgId=2&panelId=1&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe></div> --}}
{{!-- this is the one --}}


{{#if (eq project.projName "Signal Coverage - LoRA")}}
    <h3 id="projpageLabels">Heatmap</h3>
    {{>LoRa_leaflet project=project projectPoints=projectPoints}}
    <h3 id="projpageLabels">Dashboard</h3>
    <div id="dashboardcont">
        <div id="dashboard"><iframe src="https://labserver.sense-campus.gr:8087/d/ae73dhsqu28zkd/autosenseanalyticslora?from=1733827833828&to=1733828948981&timezone=browser&orgId=2" width="1100" height="500" frameborder="0"></iframe></div>
    </div>
    {{!-- {{>LoRa_map project=project projectPoints=projectPoints}}    --}}
    
{{/if}}
{{#if (eq project.projName 'Access Point Mapping - eduroam')}}
    <h3 id="projpageLabels">Heatmap</h3>
    {{>LoRa_leaflet project=project}}
    <h3 id="projpageLabels">Dashboard</h3>
    <div id="dashboardcont">
        <div id="dashboard"><iframe src="https://labserver.sense-campus.gr:8087/d/ee5awawrs54w0b/autosenseanalytics-wifi?from=now-5m&to=now&timezone=browser&refresh=5s" width="1100" height="500" frameborder="0"></iframe></div>
    </div>
    {{!-- {{>WiFi_map project=project projectPoints=projectPoints}} --}}
    
{{/if}}
{{#if (eq project.projName 'Signal Coverage - 4G')}}
    <h3 id="projpageLabels">Heatmap</h3>
    {{>LoRa_leaflet project=project projectPoints=projectPoints}}
    <h3 id="projpageLabels">Dashboard</h3>
    <div id="dashboardcont">
        <div id="dashboard"><iframe src="https://labserver.sense-campus.gr:8087/d/cec2mcjy1v7cwa/measurements-4g-rssi?folderUid=bebo48v54rsaof&from=2025-02-04T10:37:04.982Z&to=2025-02-04T12:23:13.439Z&timezone=browser" width="1100" height="500" frameborder="0"></iframe></div>
    </div>
    <div class="api-docs">
    <h3 class="api-title">API Documentation</h3>
    <p><span class="label">Base URL:</span> <code>http://localhost:3000/api/</code></p>
    <p><span class="endpoint">GET /measurements/:project/:location?</span></p>
    <p class="description">Fetch measurement data for a specific project and location.</p>
    <p class="parameters-title">Parameters:</p>
    <ul class="parameters-list">
        <li>
            <label for="project">Project:</label>
            <select id="project" class="dropdown" onchange="handleProjectChange()">
                <option value="">Select Project</option>
                <option value="4g">4G</option>
                <option value="lora">LoRa</option>
                <option value="imu">IMU</option>
            </select>
        </li>
        <li>
            <label for="location">Location:</label>
            <select id="location" class="dropdown">
                <option value="">Select Location</option>
                <option value="center">Center</option>
                <option value="uni">University</option>
                <option value="all">All</option>
            </select>
        </li>
        <li id="sensorTypeContainer" style="display: none;">
            <label for="sensorType">Sensor Type:</label>
            <select id="sensorType" class="dropdown">
                <option value="">Select Sensor Type</option>
                <option value="gyroscope">Gyroscope</option>
                <option value="accelerometer">Accelerometer</option>
            </select>
        </li>
    </ul>
    <button onclick="generateApiUrl()">Generate API URL</button>
    <p id="apiUrl" class="generated-url"></p>
</div>
<script>
    function handleProjectChange() {
    const project = document.getElementById("project").value;
    const sensorTypeContainer = document.getElementById("sensorTypeContainer");

    if (project === "imu") {
        sensorTypeContainer.style.display = "block";
    } else {
        sensorTypeContainer.style.display = "none";
    }
}

function generateApiUrl() {
    const project = document.getElementById("project").value;
    const location = document.getElementById("location").value;
    const sensorType = document.getElementById("sensorType").value;

    let apiUrl = `/api/measurements/${project}/${location}`;
    if (project === "imu" && sensorType) {
        apiUrl += `?sensor_type=${sensorType}`;
    }

    document.getElementById("apiUrl").textContent = `Generated API URL: ${apiUrl}`;
}
</script>
    {{!-- {{>WiFi_map project=project projectPoints=projectPoints}} --}}
    
{{/if}}
{{#if (eq project.projName '3D Reconstruction')}}
    <h3 id="projpageLabels">Geo-located images</h3>
    {{>camera_leaflet project=project projectPoints=projectPoints}}
{{/if}}
{{!-- {{>footer}} --}}